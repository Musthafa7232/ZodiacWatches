<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>

    <body>
        <%- include('../partials/user/user-navbar.ejs') %>
            <div class="container-fluid ">
                <div class="row mb-5">
                   <div class="col-lg-3 col-12 ">
            <div class="info">
                <span class="w-100">Hello,</span>
                <span class="w-100 fw-bold fs-6"><%= address[0].name %></span>
            </div>
            <div class="info">
              <a class="text-decoration-none  text-black"
              href="/myAccount">
              <p>Dashboard</p>
            </a>
            </div>
            <div class="info">
              <a class="text-decoration-none fw-bold text-black"
              href="/addresses">
              <p>My Address</p>
            </a> 
            </div>
            <div class="info">
              <a class="text-decoration-none text-black"
              href="/myorders">
              <p>My Orders</p>
            </a>
            </div>
            <div class="info ">
            
              <p type="button" class=" text-black " data-bs-toggle="modal"
              data-bs-target="#staticBackdrop">
              <svg width="20" height="20" class="" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#2874F0" stroke-width="0.3" stroke="#2874F0" d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"></path></svg> Logout
          </p>

          </div>
        </div>
                    <div class="col-lg-9 col-12 my-5 pt-5 ">
                        <h3 class="text-center">My Addresses</h3>
                        <div class="d-flex justify-content-end">
                            <button type="button" onclick="window.location='/addAddress'"
                        class=" my-2 btn rounded-pill btn-outline-dark btn-md btn-block">
                        Add New address
                    </button>
                        </div>
                        
                        <div class="row" data-bs-spy="scroll" data-bs-target="#navbar-example3"
                            data-bs-smooth-scroll="true" class="scrollspy-example-2" tabindex="0">
                            <% var count=0 %>

                            <% if(address[0].shippingAddress.length>0){ %>

     <% address[0].shippingAddress.forEach(item=> { %>
                                <div class="col-12 col-lg-4">
<% count++ %>
                                    <div class=" card mt-3">

                                        <div class="card-body ">
                                            <p class="card-text productName">
                                             <%= item.address %>
                                            </p>
                                            <p class="card-text">
                                                <%= item.landmark %>
                                            </p>
                                            <p class="card-text">
                                                <%= item.city %>
                                            </p>
                                            <p class="card-text">
                                                <%= item.state %>
                                            </p>
                                            <p class="card-text">
                                                <%= item.zip %>
                                            </p>
                                        </div>
                                        <div class="d-flex justify-content-between m-3">
                                            <a href="/editAddress/<%=item._id %>" class="btn btn-outline-dark rounded-pill">Edit</a>
                                            <button  data-bs-toggle="modal" data-bs-target="#staticBackdrop<%= count %>" type="button" class="btn btn-danger rounded-pill">Delete</button>
                                            <!-- Button trigger modal -->

  
  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop<%= count %>" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">Do you want to delete this Address?</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-outline-danger" onclick="deleteAddress('<%=item._id %>')">yes</button>
        </div>
      </div>
    </div>
  </div>
                                        </div>

                                    </div>

                                </div>
                                <% }) %>

                            
                                <% }else{ %>

  <lottie-player src="https://assets1.lottiefiles.com/packages/lf20_OmS8YIjyKd.json" class="mx-auto"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop  autoplay></lottie-player>
    <h3 class="text-center">you have not saved any Address </h3>

                                <% } %>


                       
                        </div>
                    </div>
                </div>
            </div>




            <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
            <%-include('../partials/user/footer.ejs') %>
    </body>

</html>