<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>

    <body>
        <%- include('../partials/user/user-navbar.ejs') %>
            <div class="container-fluid ">
                <div class="row mb-5">
                    <div class="col-12 col-lg-3">
                        <div class=" row text-center   " id="navbar-example3">
                            <div class="col-12   mt-4 bg-light text-center border-black border border-2 mb-5 py-5">
                                <h4 class="w-100">Hi
                                  <span class="w-100 fw-bold fs-6"><%= address[0].name %></span>
                                </h4>
                            </div>
                            <div class="col-12  bg-light border-black border border-2 py-5"><a
                                    class="text-decoration-none text-black" href="/myAccount">
                                    <p>Dashboard</p>
                                </a></div>
                            <div class="col-12  bg-light border border-2 py-5"><a class="text-decoration-none fw-bold  text-black"
                                    href="/addresses">
                                    <p>My Address</p>
                                </a> </div>
                            <div class="col-12  bg-light border-black border border-2 py-5"><a
                                    class="text-decoration-none text-black" href="/myOrders">
                                    <p>My Orders</p>
                                </a></div>
                            
                        </div>
                    </div>
                    <div class="col-9 my-5 pt-5 ">
                        <div class="d-flex justify-content-end">
                            <button type="button" onclick="window.location='/addAddress'"
                        class=" my-2 btn rounded-pill btn-outline-dark btn-md btn-block">
                        Add New address
                    </button>
                        </div>
                        
                        <div class="row" data-bs-spy="scroll" data-bs-target="#navbar-example3"
                            data-bs-smooth-scroll="true" class="scrollspy-example-2" tabindex="0">
                            <% var count=0 %>

                            <% if(address[0].shippingAddress.length>0){ %>
                                <h3 class="text-center">My Addresses</h3>
     <% address[0].shippingAddress.forEach(item=> { %>
                                <div class="col-7 col-lg-4">
<% count++ %>
                                    <div class=" card mt-3" style="width: 20rem;max-height: 20rem;">

                                        <div class="card-body ">
                                            <p class="card-text productName">
                                                Address(Area and Street):-  <%= item.address %>
                                            </p>
                                            <p class="card-text">
                                                <%= item.landmark %>
                                            </p>
                                            <p class="card-text">
                                                <%= item.city %>
                                            </p>
                                            <p class="card-text">
                                                <%= item.state %>
                                            </p>
                                            <p class="card-text">
                                                <%= item.zip %>
                                            </p>
                                        </div>
                                        <div class="d-flex justify-content-between m-3">
                                            <a href="/editAddress/<%=item._id %>" class="btn btn-outline-dark rounded-pill">Edit</a>
                                            <button  data-bs-toggle="modal" data-bs-target="#staticBackdrop<%= count %>" type="button" class="btn btn-danger rounded-pill">Delete</button>
                                            <!-- Button trigger modal -->

  
  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop<%= count %>" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">Do you want to delete this Address?</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-outline-danger" onclick="deleteAddress('<%=item._id %>')">yes</button>
        </div>
      </div>
    </div>
  </div>
                                        </div>

                                    </div>

                                </div>
                                <% }) %>

                            
                                <% }else{ %>
<div class="vh-100">
    <h3 class="text-center my-5">you have not saved any Address </h3>
</div>
                                <% } %>


                       
                        </div>
                    </div>
                </div>
            </div>





            <%-include('../partials/user/footer.ejs') %>
    </body>

</html>