<!DOCTYPE html>
<html lang="en">
<%- include('../../partials/head.ejs') %>

  <body class="admin-body">
    <%- include('../../partials/admin/admin-navbar.ejs') %>

    <%- include('../../partials/admin/admin-sidebar.ejs') %>

 

      <section class="conatiner ">
        <div class="row">
          <div class="card form-card ms-auto">
            <h4 class="text-center mt-4  text-secondary ">EDITPRODUCT</h4>
            <div class="card-body">

              <form  onsubmit="return false" id="form" enctype="multipart/form-data">
                
                <div class="d-flex mb-2">
                  <div class="form-outline input-control w-50">
                    <label class="form-label">Product Name </label>
                    <input type="text" class="form-control form-control-lg " id="productName" name="productName" value="<%=product.productName %>"/>
                  </div>
                  <div class="form-outline input-control w-50">
                    <label class="form-label">Brand </label>
                    <input type="text" class="form-control form-control-lg text-small  " id="brand" name="brand" value="<%= product.brand %>" />
                  </div>
                </div>

                <div class="mb-2">
                  <label for="exampleFormControlTextarea1"  class="form-label ">Discription</label>
                  <input class="form-control" value="<%= product.discription %>" id="highlights" name="highlights" ></input>
                </div>

                <div class="mb-2">
                  <label for="exampleFormControlinput1" class="form-label">Highlights</label>
                  <input class="form-control" value="<%= product.highlights %>" id="specifications"  name="specifications" ></textarea>
                </div>

                <div class="mb-2">
                  <span>Category</span><br>
                <select class="btn btn-outline-light text-black my-2" id="categoryId"  name="categoryId" value="<%category.categoryName %>">  

                   <% if(category.length>0){ %>
                    <% category.forEach(items=>{ %>
                  <option  value="<%= items._id %>"  class="text-black" <%= items._id.toString() == product.categoryId.toString()? "selected":" " %> ><%= items.categoryName %></option>
                  <% }) %>
                  <% } %>
                  </select>`
                </div>

                <div class="form-outline input-control mb-2 w-50 ">
                  <label class="form-label">Price </label>
                  <input type="number" id="price" value="<%= product.price %>" name="price" class="form-control form-control-sm w-50 "  />
                </div>
                <div class="form-outline input-control mb-2 ">
                  <label class="form-label">Offer(in %) </label>
                  <input type="number" name="offer" value="<%= product.offer %>" class="form-control form-control-sm w-50 " />
                </div>

                <div class="form-outline input-control mb-2 w-50">
                  <label class="form-label">colour </label>
                  <input type="text" id="colour" value="<%= product.colour %>" class="form-control form-control-sm w-50 " name="colour" />
                </div>

                <div class="input-group row mb-2">
                  <label class="form-label">Images of the Product</label>
                  <div class=" col-12 ">
                    <% if(product.images[0]){ %>
                     <img class="productImage mb-2 "  src="/<%= product.images[0] %>"  id="viewimage1"> 
                    <button class="btn" onclick="deleteImage(0,'<%= product._id %>')"> <img class="ms-3" src="https://img.icons8.com/material-rounded/25/null/filled-trash.png"/><span>Delete</span> </button>  
                    <% } %>
                    
                    <input type="file" accept="image/png,image/webp, image/jpg, image/jpeg" class="form-control form-control-sm my-2 ms-3 w-50 "  name="image1" id="image1" onchange="viewImage(event,'viewimage1')">
              
                  </div>
                  <div class=" col-12">
                    <% if(product.images[1]){ %>
                                          <img class="productImage mb-2"  src="/<%= product.images[1] %>"  id="viewimage2">
                    <button class="btn" onclick="deleteImage(1,'<%= product._id %>')"><img class="ms-3" src="https://img.icons8.com/material-rounded/25/null/filled-trash.png"/><span>Delete</span></button>
                      <% } %>

                    <input type="file" accept="image/png,image/webp, image/jpg, image/jpeg" class="form-control form-control-sm my-2 ms-3 w-50"  name="image2" id="image2" onchange="viewImage(event,'viewimage2')" >
                    
                  </div>
                  <div class=" col-12">
                    <% if(product.images[2]){ %>
                       <img class="productImage mb-2"  src="/<%= product.images[2] %>"  id="viewimage3">
                    <button class="btn" onclick="deleteImage(2,'<%= product._id %>')"><img class="ms-3" src="https://img.icons8.com/material-rounded/25/null/filled-trash.png"/><span>Delete</span></button>
                      <% } %>
                   
                    <input type="file" accept="image/png,image/webp, image/jpg, image/jpeg"  class="form-control form-control-sm my-2 ms-3 w-50"  name="image3" id="image3"  onchange="viewImage(event,'viewimage3')">
                    
                  </div>


                <div class="mb-2 w-50">
                  <label class="form-label ">Total Stock</label>
                  <input type="text" value="<%= product.totalStock %>" class="form-control form-control-sm w-50 " id="totalStock" name="totalStock" />
                </div>
                <div class="row mt-3">
                <div class="col-4">
                  <button  class="btn btn-outline-success" id="edit" onclick="editProducts(this.id)" data-url="<%= product._id %>" >Save Changes</button>
                </div>
                <div class="col-4">
                  <a href="/admin/products" class="btn btn-outline-primary">Cancel</a>
                </div>
</div>

              </form>
            </div>
          </div>
        </div>
      </section>
     <script>
  </script>
      <script src="/scripts/adminScript.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
  </body>

</html>